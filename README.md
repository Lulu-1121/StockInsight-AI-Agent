# 金融投资 AI Agent 项目

本项目是一个多模态金融投资 AI Agent，集成了自然语言解析、股票行情数据获取、技术指标分析、新闻搜索摘要以及多模态综合分析功能，提供关于股票的全方位智能分析报告。

## 功能简介

- **股票查询解析：** 支持使用中文或代码输入股票查询，例如“贵州茅台最近一年的走势如何”。系统会自动将股票名称转换为对应的代码，并识别时间范围。
- **行情数据与技术指标：** 调用 TuShare API 获取股票日线行情，绘制收盘价折线图，叠加 MACD、BOLL、RSI、KDJ、MA20 五条技术指标曲线，以及成交量柱状图及 MA5、MA10、MA20 三条均线。
- **新闻搜索与摘要：** 使用智谱 AI 的 Web-Search-Pro 接口实时搜索最近一个月内该股票的相关新闻（最多10条）及所属行业新闻（最多5条），并由 ChatGLM 模型生成每条新闻的简短摘要和情绪（乐观/中性/悲观）判断。
- **多模态综合分析：** 调用智谱 AI 的 GLM-4.1V-Thinking 多模态大模型，综合图表和新闻信息，从基本面、行业面、技术面三个方面对股票进行分析评价，并为每个方面打分（0-100）。结果以段落形式呈现，附带评分。
- **报告生成：** 将分析结论和图表生成 PDF 报告，方便保存和分享。

## 环境依赖

请确保安装以下依赖库：
- Python 3.8+ 建议使用
- `gradio`：用于搭建网页交互界面  
- `tushare`：用于获取股票行情数据（需要有效的 TuShare Token）  
- `zhipuai`：智谱 AI 平台 Python SDK，用于调用大模型和搜索接口  
- `ta-lib`：技术指标计算库（安装前需满足 TA-Lib 底层依赖）  
- `reportlab`：用于生成 PDF 报告  
- `jsonlines`：用于读取股票名称-代码映射文件  
- `pillow`：用于图像处理（合并价格和成交量图）  
- 以及常用的数据处理和绘图库：`matplotlib`、`pandas`、`numpy`。

可以通过以下命令安装所需库：
```bash
pip install -r requirements.txt